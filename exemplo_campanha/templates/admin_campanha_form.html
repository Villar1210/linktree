{% extends "base.html" %}
{% block content %}
<div class="container mt-5" style="max-width: 600px;">
  <h2>{{ campanha and 'Editar' or 'Nova' }} Campanha</h2>
  <form method="post" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    <div class="mb-3">
      {{ form.imagem_url.label(class_="form-label") }}
      {{ form.imagem_url(class_="form-control mb-2", placeholder="URL da imagem") }}
      {{ form.imagem_upload(class_="form-control", accept="image/*", onchange="previewImage(event)") }}
      <small class="form-text text-muted">Você pode informar uma URL ou fazer upload de uma imagem.</small>
      <img id="preview" style="max-width:200px; display:none; margin-top:10px;">
    </div>
    <div class="mb-3">
      {{ form.video.label(class_="form-label") }}
      {{ form.video(class_="form-control", placeholder="URL do vídeo") }}
    </div>
    <div class="mb-3">
      {{ form.audio.label(class_="form-label") }}
      {{ form.audio(class_="form-control", placeholder="URL do áudio") }}
    </div>
    <div class="mb-3">
      {{ form.cor_fundo.label(class_="form-label") }}
      {{ form.cor_fundo(class_="form-control form-control-color") }}
    </div>
    <div class="mb-3">
      {{ form.cor_texto.label(class_="form-label") }}
      {{ form.cor_texto(class_="form-control form-control-color") }}
    </div>
    <div class="mb-3">
      {{ form.titulo.label(class_="form-label") }}
      {{ form.titulo(class_="form-control", required=True) }}
    </div>
    <div class="mb-3">
      {{ form.subtitulo.label(class_="form-label") }}
      {{ form.subtitulo(class_="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.desconto.label(class_="form-label") }}
      {{ form.desconto(class_="form-control", placeholder="Ex: 10% OFF + Brinde") }}
    </div>
    <div class="mb-3">
      {{ form.beneficios.label(class_="form-label") }}
      {{ form.beneficios(class_="form-control", placeholder="FGTS aceito;Financiamento até 35 anos") }}
    </div>
    <div class="mb-3">
      {{ form.condicoes.label(class_="form-label") }}
      {{ form.condicoes(class_="form-control", placeholder="Condições exclusivas região leste") }}
    </div>
    <div class="form-check form-switch mb-3">
      {{ form.destaque(class_="form-check-input", id="destaque") }}
      <label class="form-check-label" for="destaque">Destaque</label>
    </div>
    <div class="form-check form-switch mb-3">
      {{ form.ativo(class_="form-check-input", id="ativo") }}
      <label class="form-check-label" for="ativo">Ativo</label>
    </div>
    <button type="submit" class="btn btn-primary">Salvar</button>
    <a href="#" class="btn btn-secondary ms-2">Cancelar</a>
  </form>
</div>
<script>
function previewImage(event) {
  var output = document.getElementById('preview');
  output.src = URL.createObjectURL(event.target.files[0]);
  output.style.display = 'block';
}
</script>
{% endblock %}
